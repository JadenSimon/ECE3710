.game_setup
      // set the initial tank location for player 1
      MOVI REG0 0000111100001111
      MOVI REG1 0000111100001110
      MOVI REG2 0000000000111111
      MOVI REG3 0000000000111111
      STOR REG2 REG0
      STOR REG3 REG1
      // set the initial tank location for player 2
      MOVI REG0 0000111100001101
      MOVI REG1 0000111100001100
      MOVI REG2 0000001000111111
      MOVI REG3 0000000110011111
      STOR REG2 REG0
      STOR REG3 REG1
      // set the initial tank health for player 1
      MOVI REG0 0000111001110100
      MOVI REG1 00000011
      STOR REG1 REG0
      // set the initial tank health for player 2
      MOVI REG0 0000111001110011
      MOVI REG1 00000011
      STOR REG1 REG0
      // set the initial orientation for player 1
      MOVI REG0 0000111001110010
      MOVI REG1 00000001
      STOR REG1 REG0
      // set the initial orientation for player 2
      MOVI REG0 0000111001110001
      MOVI REG1 00000011
      STOR REG1 REG0
      // initialize stack pointer
      MOVI REG12 1111000000000000
      // set the game state to one to tell the vga to draw the map
      MOVI REG0 0000111100000111
      MOVI REG1 00000001
      STOR REG1 REG0
      MOVI REG4 .game_loop_player1
      JCND NC REG4

.game_loop_player1
      MOVI REG0 0000000000000000
      MOVI REG1 1111111111111111
.wait_loop
      ADDI REG0 00000001
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      ADDI REG2 00000000
      MOVI REG2 .wait_loop
      CMP REG0 REG1
      JCND NE REG2
      // Progress the explosion animation
      MOVI REG0 .progress_animations
      JAL REG11 REG0
      // load snes input
      LCI REG0 player1
      // if its a move UP: jump to update_tank_location_up
      MOV REG2 REG0
      MOVI REG1 0000100000000000
      AND REG2 REG1
      MOVI REG3 .update_tank_location_up_player1
      CMP REG2 REG1
      JCND EQ REG3
      // if its a move DOWN: jump to update_tank_location_down
      MOV REG2 REG0
      MOVI REG1 0000010000000000
      AND REG2 REG1
      MOVI REG3 .update_tank_location_down_player1
      CMP REG2 REG1
      JCND EQ REG3
      // if its a move LEFT: jump to update_tank_location_left
      MOV REG2 REG0
      MOVI REG1 0000001000000000
      AND REG2 REG1
      MOVI REG3 .update_tank_location_left_player1
      CMP REG2 REG1
      JCND EQ REG3
      // if its a move RIGHT: jump to update_tank_location_right
      MOV REG2 REG0
      MOVI REG1 0000000100000000
      AND REG2 REG1
      MOVI REG3 .update_tank_location_right_player1
      CMP REG2 REG1
      JCND EQ REG3
.check_shoot_player1
      // if its a shoot: jump to spawn_projectile
      LCI REG0 player1
      MOV REG2 REG0
      MOVI REG1 0000000010000000
      AND REG2 REG1
      MOVI REG3 .spawn_projectile_player1
      CMP REG2 REG1
      JCND EQ REG3
      MOVI REG3 .update_projectiles_player1
      JCND NC REG3

.game_loop_player2
      // load snes input
      LCI REG0 player2
      MOV REG2 REG0
      // if its a move UP: jump to update_tank_location_up
      MOVI REG1 0000100000000000
      AND REG2 REG1
      MOVI REG3 .update_tank_location_up_player2
      CMP REG2 REG1
      JCND EQ REG3
      // if its a move DOWN: jump to update_tank_location_down
      MOV REG2 REG0
      MOVI REG1 0000010000000000
      AND REG2 REG1
      MOVI REG3 .update_tank_location_down_player2
      CMP REG2 REG1
      JCND EQ REG3
      // if its a move LEFT: jump to update_tank_location_left
      MOV REG2 REG0
      MOVI REG1 0000001000000000
      AND REG2 REG1
      MOVI REG3 .update_tank_location_left_player2
      CMP REG2 REG1
      JCND EQ REG3
      // if its a move RIGHT: jump to update_tank_location_right
      MOV REG2 REG0
      MOVI REG1 0000000100000000
      AND REG2 REG1
      MOVI REG3 .update_tank_location_right_player2
      CMP REG2 REG1
      JCND EQ REG3
.check_shoot_player2
      // if its a shoot: jump to spawn_projectile
      LCI REG0 player2
      MOV REG2 REG0
      MOVI REG1 0000000010000000
      AND REG2 REG1
      MOVI REG3 .spawn_projectile_player2
      CMP REG2 REG1
      JCND EQ REG3
      MOVI REG3 .update_projectiles_player2
      JCND NC REG3

.update_projectiles_player1
      // load projectile x coord, y coord, and orientation
      MOVI REG6 0000111100001011
      LOAD REG0 REG6
      MOVI REG7 0000111100001010
      LOAD REG1 REG7
      MOVI REG4 0000111001110000
      LOAD REG2 REG4
      // if they are not active then just jump to next game loop
      MOVI REG3 .game_loop_player2
      CMPI REG0 00000000
      JCND EQ REG3
      // calculate the offset
      MOVI REG3 .move_proj1_up
      CMPI REG2 00000000
      JCND EQ REG3
      MOVI REG3 .move_proj1_down
      CMPI REG2 00000010
      JCND EQ REG3
      MOVI REG3 .move_proj1_left
      CMPI REG2 00000011
      JCND EQ REG3
      MOVI REG3 .move_proj1_right
      CMPI REG2 00000001
      JCND EQ REG3
.move_proj1_up
      SUBI REG1 00000100
      MOVI REG3 .check_proj1_collision
      JCND NC REG3
.move_proj1_down
      ADDI REG1 00000100
      MOVI REG3 .check_proj1_collision
      JCND NC REG3
.move_proj1_left
      SUBI REG0 00000100
      MOVI REG3 .check_proj1_collision
      JCND NC REG3
.move_proj1_right
      ADDI REG0 00000100
      MOVI REG3 .check_proj1_collision
      JCND NC REG3
.check_proj1_collision
      MOV REG14 REG0
      MOV REG15 REG1
      // Check wall collisions first
      MOVI REG8 .check_wall_collision
      JAL REG11 REG8
      MOVI REG8 .mark_invalid1
      CMPI REG13 00000001
      JCND EQ REG8
      // Check player2 collision
      PUSH REG3
      PUSH REG4
      // Get player2 x and y position
      MOVI REG3 0000111100001101
      MOVI REG4 0000111100001100
      LOAD REG3 REG3
      LOAD REG4 REG4
      MOVI REG8 .check_collision
      JAL REG11 REG8
      POP REG4
      POP REG3
      MOVI REG8 .damage_player2
      CMPI REG13 00000001
      JCND EQ REG8
      // Update projectile locations
      STOR REG0 REG6
      STOR REG1 REG7
      MOVI REG3 .game_loop_player2
      JCND NC REG3
.damage_player2
      MOVI REG14 0000111001110011
      LOAD REG15 REG14
      SUBI REG15 00000001
      STOR REG15 REG14
.mark_invalid1
      PUSH REG8
      PUSH REG9
      MOVI REG8 0001000100100001
      MOVI REG9 00000000
      STOR REG9 REG8
      MOVI REG8 0001000100100000
      LOAD REG9 REG6
      STOR REG9 REG8
      MOVI REG8 0001000100011111
      LOAD REG9 REG7
      STOR REG9 REG8
      POP REG9
      POP REG8
      MOVI REG0 00000000
      STOR REG0 REG6
      STOR REG0 REG7
      MOVI REG3 .game_loop_player2
      JCND NC REG3


.update_projectiles_player2
      // load projectile x coord, y coord, and orientation
      MOVI REG6 0000111100001001
      LOAD REG0 REG6
      MOVI REG7 0000111100001000
      LOAD REG1 REG7
      MOVI REG4 0000111001101111
      LOAD REG2 REG4
      // if they are not active then just jump to next game loop
      MOVI REG3 .game_loop_player1
      CMPI REG0 00000000
      JCND EQ REG3
      // calculate the offset
      MOVI REG3 .move_proj2_up
      CMPI REG2 00000000
      JCND EQ REG3
      MOVI REG3 .move_proj2_down
      CMPI REG2 00000010
      JCND EQ REG3
      MOVI REG3 .move_proj2_left
      CMPI REG2 00000011
      JCND EQ REG3
      MOVI REG3 .move_proj2_right
      CMPI REG2 00000001
      JCND EQ REG3
.move_proj2_up
      SUBI REG1 00000100
      MOVI REG3 .check_proj2_collision
      JCND NC REG3
.move_proj2_down
      ADDI REG1 00000100
      MOVI REG3 .check_proj2_collision
      JCND NC REG3
.move_proj2_left
      SUBI REG0 00000100
      MOVI REG3 .check_proj2_collision
      JCND NC REG3
.move_proj2_right
      ADDI REG0 00000100
      MOVI REG3 .check_proj2_collision
      JCND NC REG3
.check_proj2_collision
      MOV REG14 REG0
      MOV REG15 REG1
      MOVI REG8 .check_wall_collision
      JAL REG11 REG8
      MOVI REG8 .mark_invalid2
      CMPI REG13 00000001
      JCND EQ REG8
      // Check player1 collision
      PUSH REG3
      PUSH REG4
      // Get player1 x and y position
      MOVI REG3 0000111100001111
      MOVI REG4 0000111100001110
      LOAD REG3 REG3
      LOAD REG4 REG4
      MOVI REG8 .check_collision
      JAL REG11 REG8
      POP REG4
      POP REG3
      MOVI REG8 .damage_player1
      CMPI REG13 00000001
      JCND EQ REG8
      STOR REG0 REG6
      STOR REG1 REG7
      MOVI REG3 .game_loop_player1
      JCND NC REG3
.damage_player1
      MOVI REG14 0000111001110100
      LOAD REG15 REG14
      SUBI REG15 00000001
      STOR REG15 REG14
.mark_invalid2
      PUSH REG8
      PUSH REG9
      MOVI REG8 0001000100011110
      MOVI REG9 00000000
      STOR REG9 REG8
      MOVI REG8 0001000100011101
      LOAD REG9 REG6
      STOR REG9 REG8
      MOVI REG8 0001000100011100
      LOAD REG9 REG7
      STOR REG9 REG8
      POP REG9
      POP REG8
      MOVI REG0 00000000
      STOR REG0 REG6
      STOR REG0 REG7
      MOVI REG3 .game_loop_player1
      JCND NC REG3

.update_tank_location_left_player1
      // do some animation stuff
      MOVI REG0 0000111100010000
      LOAD REG1 REG0
      XORI REG1 00000001
      STOR REG1 REG0
      // move the address of the player1 loc to saved register
      MOVI REG6 0000111100001111
      LOAD REG14 REG6
      MOVI REG7 0000111100001110
      LOAD REG15 REG7
      MOVI REG10 0000111001110010
      MOVI REG5 00000011
      SUBI REG14 00000001
      MOVI REG4 .check_wall_collision
      JAL REG11 REG4
      MOVI REG4 .check_shoot_player1
      CMPI REG13 00000000
      JCND NE REG4
      STOR REG14 REG6
      STOR REG5 REG10
      MOVI REG4 .check_shoot_player1
      JCND NC REG4

.update_tank_location_right_player1
      // do some animation stuff
      MOVI REG0 0000111100010000
      LOAD REG1 REG0
      XORI REG1 00000001
      STOR REG1 REG0
      // move the address of the player1 loc to saved register
      MOVI REG6 0000111100001111
      LOAD REG14 REG6
      MOVI REG7 0000111100001110
      LOAD REG15 REG7
      // mov the orientation address into reg10
      MOVI REG10 0000111001110010
      MOVI REG5 00000001
      ADDI REG14 00000001
      MOVI REG4 .check_wall_collision
      JAL REG11 REG4
      MOVI REG4 .check_shoot_player1
      CMPI REG13 00000000
      JCND NE REG4
      STOR REG14 REG6
      STOR REG5 REG10
      MOVI REG4 .check_shoot_player1
      JCND NC REG4

.update_tank_location_up_player1
      // do some animation stuff
      MOVI REG0 0000111100010000
      LOAD REG1 REG0
      XORI REG1 00000001
      STOR REG1 REG0
      // move the address of the player1 loc to saved register
      MOVI REG6 0000111100001111
      LOAD REG14 REG6
      MOVI REG7 0000111100001110
      LOAD REG15 REG7
      MOVI REG10 0000111001110010
      MOVI REG5 00000000
      SUBI REG15 00000001
      MOVI REG4 .check_wall_collision
      JAL REG11 REG4
      MOVI REG4 .check_shoot_player1
      CMPI REG13 00000000
      JCND NE REG4
      STOR REG15 REG7
      STOR REG5 REG10
      MOVI REG4 .check_shoot_player1
      JCND NC REG4

.update_tank_location_down_player1
      // do some animation stuff
      MOVI REG0 0000111100010000
      LOAD REG1 REG0
      XORI REG1 00000001
      STOR REG1 REG0
      // move the address of the player1 loc to saved register
      MOVI REG6 0000111100001111
      LOAD REG14 REG6
      MOVI REG7 0000111100001110
      LOAD REG15 REG7
      MOVI REG10 0000111001110010
      MOVI REG5 00000010
      ADDI REG15 00000001
      MOVI REG4 .check_wall_collision
      JAL REG11 REG4
      MOVI REG4 .check_shoot_player1
      CMPI REG13 00000000
      JCND NE REG4
      STOR REG15 REG7
      STOR REG5 REG10
      MOVI REG4 .check_shoot_player1
      JCND NC REG4

.update_tank_location_right_player2
      // do some animation stuff
      MOVI REG0 0000111100010001
      LOAD REG1 REG0
      XORI REG1 00000001
      STOR REG1 REG0
      // move the address of the player2 loc to saved register
      MOVI REG6 0000111100001101
      LOAD REG14 REG6
      MOVI REG7 0000111100001100
      LOAD REG15 REG7
      MOVI REG10 0000111001110001
      MOVI REG5 00000001
      ADDI REG14 00000001
      MOVI REG4 .check_wall_collision
      JAL REG11 REG4
      MOVI REG4 .check_shoot_player2
      CMPI REG13 00000000
      JCND NE REG4
      STOR REG14 REG6
      STOR REG5 REG10
      MOVI REG4 .check_shoot_player2
      JCND NC REG4

.update_tank_location_left_player2
      // do some animation stuff
      MOVI REG0 0000111100010001
      LOAD REG1 REG0
      XORI REG1 00000001
      STOR REG1 REG0
      // move the address of the player2 loc to saved register
      MOVI REG6 0000111100001101
      LOAD REG14 REG6
      MOVI REG7 0000111100001100
      LOAD REG15 REG7
      MOVI REG10 0000111001110001
      MOVI REG5 00000011
      SUBI REG14 00000001
      MOVI REG4 .check_wall_collision
      JAL REG11 REG4
      MOVI REG4 .check_shoot_player2
      CMPI REG13 00000000
      JCND NE REG4
      STOR REG14 REG6
      STOR REG5 REG10
      MOVI REG4 .check_shoot_player2
      JCND NC REG4

.update_tank_location_up_player2
      // do some animation stuff
      MOVI REG0 0000111100010001
      LOAD REG1 REG0
      XORI REG1 00000001
      STOR REG1 REG0
      // move the address of the player2 loc to saved register
      MOVI REG6 0000111100001101
      LOAD REG14 REG6
      MOVI REG7 0000111100001100
      LOAD REG15 REG7
      MOVI REG10 0000111001110001
      MOVI REG5 00000000
      SUBI REG15 00000001
      MOVI REG4 .check_wall_collision
      JAL REG11 REG4
      MOVI REG4 .check_shoot_player2
      CMPI REG13 00000000
      JCND NE REG4
      STOR REG15 REG7
      STOR REG5 REG10
      MOVI REG4 .check_shoot_player2
      JCND NC REG4

.update_tank_location_down_player2
      // do some animation stuff
      MOVI REG0 0000111100010001
      LOAD REG1 REG0
      XORI REG1 00000001
      STOR REG1 REG0
      // move the address of the player2 loc to saved register
      MOVI REG6 0000111100001101
      LOAD REG14 REG6
      MOVI REG7 0000111100001100
      LOAD REG15 REG7
      MOVI REG10 0000111001110001
      MOVI REG5 00000010
      ADDI REG15 00000001
      MOVI REG4 .check_wall_collision
      JAL REG11 REG4
      MOVI REG4 .check_shoot_player2
      CMPI REG13 00000000
      JCND NE REG4
      STOR REG15 REG7
      STOR REG5 REG10
      MOVI REG4 .check_shoot_player2
      JCND NC REG4

.spawn_projectile_player1
      // animation stuff
      MOVI REG0 0000111100010000
      LOAD REG1 REG0
      ADDI REG1 00000010
      STOR REG1 REG0
      // projectile x addr
      MOVI REG0 0000111100001011
      // projectile y addr
      MOVI REG1 0000111100001010
      // projectile orientation addr
      MOVI REG6 0000111001110000
      // player1 x addr
      MOVI REG2 0000111100001111
      // player1 y addr
      MOVI REG3 0000111100001110
      // player1 orientation addr
      MOVI REG5 0000111001110010
      LOAD REG2 REG2
      LOAD REG3 REG3
      LOAD REG5 REG5
      LOAD REG0 REG0
      MOVI REG7 .update_projectiles_player1
      CMPI REG0 00000000
      JCND NE REG7
      MOVI REG0 0000111100001011
      // calculate the offset
      MOVI REG7 .spawn_proj1_up
      CMPI REG5 00000000
      JCND EQ REG7
      MOVI REG7 .spawn_proj1_down
      CMPI REG5 00000010
      JCND EQ REG7
      MOVI REG7 .spawn_proj1_left
      CMPI REG5 00000011
      JCND EQ REG7
      MOVI REG7 .spawn_proj1_right
      CMPI REG5 00000001
      JCND EQ REG7
.spawn_proj1_up
      SUBI REG3 00010000
      STOR REG2 REG0
      STOR REG3 REG1
      STOR REG5 REG6
      MOVI REG4 .update_projectiles_player1
      JCND NC REG4
.spawn_proj1_down
      ADDI REG3 00010000
      STOR REG2 REG0
      STOR REG3 REG1
      STOR REG5 REG6
      MOVI REG4 .update_projectiles_player1
      JCND NC REG4
.spawn_proj1_left
      SUBI REG2 00010000
      STOR REG2 REG0
      STOR REG3 REG1
      STOR REG5 REG6
      MOVI REG4 .update_projectiles_player1
      JCND NC REG4
.spawn_proj1_right
      ADDI REG2 00010000
      STOR REG2 REG0
      STOR REG3 REG1
      STOR REG5 REG6
      MOVI REG4 .update_projectiles_player1
      JCND NC REG4

.spawn_projectile_player2
      // animation stuff
      MOVI REG0 0000111100010001
      LOAD REG1 REG0
      ADDI REG1 00000010
      STOR REG1 REG0
      // proj x addr
      MOVI REG0 0000111100001001
      // proj y addr
      MOVI REG1 0000111100001000
      // proj orientation addr
      MOVI REG6 0000111001101111
      // player2 x addr
      MOVI REG2 0000111100001101
      // player2 y addr
      MOVI REG3 0000111100001100
      // player2 orientation addr
      MOVI REG5 0000111001110001
      LOAD REG2 REG2
      LOAD REG3 REG3
      LOAD REG5 REG5
      LOAD REG0 REG0
      MOVI REG7 .update_projectiles_player2
      CMPI REG0 00000000
      JCND NE REG7
      MOVI REG0 0000111100001001
      // calculate the offset
      MOVI REG7 .spawn_proj2_up
      CMPI REG5 00000000
      JCND EQ REG7
      MOVI REG7 .spawn_proj2_down
      CMPI REG5 00000010
      JCND EQ REG7
      MOVI REG7 .spawn_proj2_left
      CMPI REG5 00000011
      JCND EQ REG7
      MOVI REG7 .spawn_proj2_right
      CMPI REG5 00000001
      JCND EQ REG7
.spawn_proj2_up
      SUBI REG3 00010000
      STOR REG2 REG0
      STOR REG3 REG1
      STOR REG5 REG6
      MOVI REG4 .update_projectiles_player2
      JCND NC REG4
.spawn_proj2_down
      ADDI REG3 00010000
      STOR REG2 REG0
      STOR REG3 REG1
      STOR REG5 REG6
      MOVI REG4 .update_projectiles_player2
      JCND NC REG4
.spawn_proj2_left
      SUBI REG2 00010000
      STOR REG2 REG0
      STOR REG3 REG1
      STOR REG5 REG6
      MOVI REG4 .update_projectiles_player2
      JCND NC REG4
.spawn_proj2_right
      ADDI REG2 00010000
      STOR REG2 REG0
      STOR REG3 REG1
      STOR REG5 REG6
      MOVI REG4 .update_projectiles_player2
      JCND NC REG4

// Checks collisions between all walls
// ARGS:
//    REG14 -> pox_x
//    REG15 -> pos_y
// RETURNS:
//    REG13 -> 0 (FALSE) or 1 (TRUE)
.check_wall_collision
      PUSH REG5
      PUSH REG6
      PUSH REG11
      MOVI REG3 00001111
      MOVI REG4 00001111
      MOVI REG5 0000111111110000
.next_tile
      // end of wall coordinates in reg8 so we can compare if we've gotten to the end of tiles
      MOVI REG8 0001000100011011
      MOVI REG9 .return_check_wall_collision
      MOVI REG13 00000000
      CMP REG5 REG8
      JCND GT REG9
      LOAD REG13 REG5
      MOVI REG8 .increment
      MOVI REG9 .check_collision
      LSH REG13 1110
      CMPI REG13 00000110
      JCND LT REG8
      JAL REG11 REG9
      MOVI REG8 .increment
      CMPI REG13 00000000
      JCND EQ REG8
.return_check_wall_collision
      POP REG11
      POP REG6
      POP REG5
      JCND NC REG11
.increment
      ADDI REG5 00000001
      ADDI REG3 00100000
      MOVI REG8 0000001001111111
      MOVI REG9 .next_tile
      CMP REG3 REG8
      JCND LT REG9
      MOVI REG3 00001111
      ADDI REG4 00100000
      JCND NC REG9

// Checks collisions between two positions, assumes 32x32 size for both
// ARGS:
//    REG3 -> pos1_x
//    REG4 -> pox1_y
//    REG14 -> pox2_x
//    REG15 -> pos2_y
// RETURNS:
//    REG13 -> 0 (FALSE) or 1 (TRUE)
.check_collision
      MOVI REG13 .reverse_x
      CMP REG14 REG3
      JCND LT REG13
      MOV REG8 REG14
      SUB REG8 REG3
      MOVI REG13 .check_y
      CMPI REG8 00100000
      JCND LT REG13
      MOVI REG13 .return_false
      JCND NC REG13
.reverse_x
      MOV REG8 REG3
      SUB REG8 REG14
      MOVI REG13 .check_y
      CMPI REG8 00100000
      JCND LT REG13
      MOVI REG13 .return_false
      JCND NC REG13
.check_y
      MOVI REG13 .reverse_y
      CMP REG15 REG4
      JCND LT REG13
      MOV REG8 REG15
      SUB REG8 REG4
      MOVI REG13 .return_true
      CMPI REG8 00100000
      JCND LT REG13
      MOVI REG13 .return_false
      JCND NC REG13
.reverse_y
      MOV REG8 REG4
      SUB REG8 REG15
      MOVI REG13 .return_true
      CMPI REG8 00100000
      JCND LT REG13
      MOVI REG13 .return_false
      JCND NC REG13
.return_false
      MOVI REG13 00000000
      JCND NC REG11
.return_true
      MOVI REG13 00000001
      JCND NC REG11

// This subroutine does a some animation stuff
// Increments all explosion frames
// If explosion frame_id is 4, then remove it from the game
.progress_animations
      // Reset tank shooting animations
      MOVI REG0 0000111100010000
      LOAD REG1 REG0
      ANDI REG1 00001101
      STOR REG1 REG0
      MOVI REG0 0000111100010001
      LOAD REG1 REG0
      ANDI REG1 00001101
      STOR REG1 REG0
      
      // Explosion 1
      MOVI REG0 0001000100100001
      LOAD REG1 REG0
      CMPI REG1 00000100
      BCND NE 00000100 // Skip to incrementing the frame id
      MOVI REG2 0001000100100000
      MOVI REG3 00000000
      STOR REG3 REG2
      ADDI REG1 00000001
      STOR REG1 REG0 

      // Explosion 2
      MOVI REG0 0001000100011110
      LOAD REG1 REG0
      CMPI REG1 00000100
      BCND NE 00000100 // Skip to incrementing the frame id
      MOVI REG2 0001000100011101
      MOVI REG3 00000000
      STOR REG3 REG2
      ADDI REG1 00000001
      STOR REG1 REG0

      JCND NC REG11 